@model _744Project.ViewModels.NetworkViewModel

@{
    ViewBag.Title = "Network";
}


<h2>Network</h2>
<script src="@Url.Content("~/Scripts/cytoscape.js")" type="text/javascript"></script>

<div class="" id="cy" style="width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;">

</div>

<div>
	@Html.Raw(Json.Encode(Model))
</div>



@section Scripts{

<script>
	var jsonData = @Html.Raw(Json.Encode(Model));

	var NetworkElements = {
		nodes: [],
		edges: []
	};

	function convertToCytoscape() {
		//alert("hi");
		console.log("Hello..");
		//console.log(jsonData.networkEntities);
		for(var p in jsonData.networkEntities){
			console.log(p);
			NetworkElements.nodes.push({ data: { id: p } });
			
		}
		console.log("===========================================================================================");
		for(var q in jsonData.connections){
			console.log(jsonData.connections[q]);
			NetworkElements.edges.push({ data: { id: jsonData.connections[q].ip1 + jsonData.connections[q].ip2, source: jsonData.connections[q].ip1, target: jsonData.connections[q].ip2 } });
		}

		return NetworkElements;
	}

	var cy = cytoscape({
		container: document.getElementById('cy'),
		style: [
			{
				selector: 'node',
				style: {
					shape: 'hexagon',
					'background-color': 'red',
					label: 'data(id)'
				}
			}],
		layout: {
			name: 'grid'
		},
		elements: convertToCytoscape()
		/*[
			// nodes
			{ data: { id: 'a' } },
			{ data: { id: 'b' } },
			{ data: { id: 'c' } },
			{ data: { id: 'd' } },
			{ data: { id: 'e' } },
			{ data: { id: 'f' } },
			// edges
			{
				data: {
					id: 'ab',
					source: 'a',
					target: 'b'
				}
			},
			{
				data: {
					id: 'cd',
					source: 'c',
					target: 'd'
				}
			},
			{
				data: {
					id: 'ef',
					source: 'e',
					target: 'f'
				}
			},
			{
				data: {
					id: 'ac',
					source: 'a',
					target: 'd'
				}
			},
			{
				data: {
					id: 'be',
					source: 'b',
					target: 'e'
				}
			}
		]*/
	});	

	function testData() {
		alert("here..");
		return testData;
	}

</script>
}